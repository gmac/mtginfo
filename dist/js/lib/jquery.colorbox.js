/*!
	jQuery Colorbox v1.4.10 - 2013-04-02
	(c) 2013 Jack Moore - jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/

define(["jquery"],function(e){return function(e,t,n){function r(n,r,i){var s=t.createElement(n);return r&&(s.id=et+r),i&&(s.style.cssText=i),e(s)}function i(){return n.innerHeight?n.innerHeight:e(n).height()}function s(e){var t=N.length,n=(z+e)%t;return 0>n?t+n:n}function o(e,t){return Math.round((/%/.test(e)?("x"===t?C.width():i())/100:1)*parseInt(e,10))}function u(e,t){return e.photo||e.photoRegex.test(t)}function a(e,t){return e.retinaUrl&&n.devicePixelRatio>1?t.replace(e.photoRegex,e.retinaSuffix):t}function f(e){"contains"in y[0]&&!y[0].contains(e.target)&&(e.stopPropagation(),y.focus())}function l(){var t,n=e.data(U,Z);null==n?(j=e.extend({},Y),console&&console.log&&console.log("Error: cboxElement missing settings object")):j=e.extend({},n);for(t in j)e.isFunction(j[t])&&"on"!==t.slice(0,2)&&(j[t]=j[t].call(U));j.rel=j.rel||U.rel||e(U).data("rel")||"nofollow",j.href=j.href||e(U).attr("href"),j.title=j.title||U.title,"string"==typeof j.href&&(j.href=e.trim(j.href))}function c(n,r){e(t).trigger(n),at.trigger(n),e.isFunction(r)&&r.call(U)}function h(){var e,t,n,r,i,s=et+"Slideshow_",o="click."+et;j.slideshow&&N[1]?(t=function(){clearTimeout(e)},n=function(){(j.loop||N[z+1])&&(e=setTimeout(K.next,j.slideshowSpeed))},r=function(){_.html(j.slideshowStop).unbind(o).one(o,i),at.bind(it,n).bind(rt,t).bind(st,i),y.removeClass(s+"off").addClass(s+"on")},i=function(){t(),at.unbind(it,n).unbind(rt,t).unbind(st,i),_.html(j.slideshowStart).unbind(o).one(o,function(){K.next(),r()}),y.removeClass(s+"on").addClass(s+"off")},j.slideshowAuto?r():i()):y.removeClass(s+"off "+s+"on")}function p(n){$||(U=n,l(),N=e(U),z=0,"nofollow"!==j.rel&&(N=e("."+tt).filter(function(){var t,n=e.data(this,Z);return n&&(t=e(this).data("rel")||n.rel||this.rel),t===j.rel}),z=N.index(U),-1===z&&(N=N.add(U),z=N.length-1)),g.css({opacity:parseFloat(j.opacity),cursor:j.overlayClose?"pointer":"auto",visibility:"visible"}).show(),Q&&y.add(g).removeClass(Q),j.className&&y.add(g).addClass(j.className),Q=j.className,H.html(j.close).show(),X||(X=V=!0,y.css({visibility:"hidden",display:"block"}),k=r(ft,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(w),F=E.height()+T.height()+w.outerHeight(!0)-w.height(),I=S.width()+x.width()+w.outerWidth(!0)-w.width(),q=k.outerHeight(!0),R=k.outerWidth(!0),j.w=o(j.initialWidth,"x"),j.h=o(j.initialHeight,"y"),K.position(),h(),c(nt,j.onOpen),B.add(O).hide(),y.focus(),t.addEventListener&&(t.addEventListener("focus",f,!0),at.one(ot,function(){t.removeEventListener("focus",f,!0)})),j.returnFocus&&at.one(ot,function(){e(U).focus()})),m())}function d(){!y&&t.body&&(G=!1,C=e(n),y=r(ft).attr({id:Z,"class":e.support.opacity===!1?et+"IE":"",role:"dialog",tabindex:"-1"}).hide(),g=r(ft,"Overlay").hide(),A=r(ft,"LoadingOverlay").add(r(ft,"LoadingGraphic")),b=r(ft,"Wrapper"),w=r(ft,"Content").append(O=r(ft,"Title"),M=r(ft,"Current"),P=r("button","Previous"),D=r("button","Next"),_=r("button","Slideshow"),A,H=r("button","Close")),b.append(r(ft).append(r(ft,"TopLeft"),E=r(ft,"TopCenter"),r(ft,"TopRight")),r(ft,!1,"clear:left").append(S=r(ft,"MiddleLeft"),w,x=r(ft,"MiddleRight")),r(ft,!1,"clear:left").append(r(ft,"BottomLeft"),T=r(ft,"BottomCenter"),r(ft,"BottomRight"))).find("div div").css({"float":"left"}),L=r(ft,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),B=D.add(P).add(M).add(_),e(t.body).append(g,y.append(b,L)))}function v(){function n(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.control||(e.preventDefault(),p(this))}return y?(G||(G=!0,D.click(function(){K.next()}),P.click(function(){K.prev()}),H.click(function(){K.close()}),g.click(function(){j.overlayClose&&K.close()}),e(t).bind("keydown."+et,function(e){var t=e.keyCode;X&&j.escKey&&27===t&&(e.preventDefault(),K.close()),X&&j.arrowKey&&N[1]&&!e.altKey&&(37===t?(e.preventDefault(),P.click()):39===t&&(e.preventDefault(),D.click()))}),e.isFunction(e.fn.on)?e(t).on("click."+et,"."+tt,n):e("."+tt).live("click."+et,n)),!0):!1}function m(){var t,i,s,f=K.prep,h=++lt;V=!0,W=!1,U=N[z],l(),c(ut),c(rt,j.onLoad),j.h=j.height?o(j.height,"y")-q-F:j.innerHeight&&o(j.innerHeight,"y"),j.w=j.width?o(j.width,"x")-R-I:j.innerWidth&&o(j.innerWidth,"x"),j.mw=j.w,j.mh=j.h,j.maxWidth&&(j.mw=o(j.maxWidth,"x")-R-I,j.mw=j.w&&j.w<j.mw?j.w:j.mw),j.maxHeight&&(j.mh=o(j.maxHeight,"y")-q-F,j.mh=j.h&&j.h<j.mh?j.h:j.mh),t=j.href,J=setTimeout(function(){A.show()},100),j.inline?(s=r(ft).hide().insertBefore(e(t)[0]),at.one(ut,function(){s.replaceWith(k.children())}),f(e(t))):j.iframe?f(" "):j.html?f(j.html):u(j,t)?(t=a(j,t),e(W=new Image).addClass(et+"Photo").bind("error",function(){j.title=!1,f(r(ft,"Error").html(j.imgError))}).one("load",function(){var e;h===lt&&(j.retinaImage&&n.devicePixelRatio>1&&(W.height=W.height/n.devicePixelRatio,W.width=W.width/n.devicePixelRatio),j.scalePhotos&&(i=function(){W.height-=W.height*e,W.width-=W.width*e},j.mw&&W.width>j.mw&&(e=(W.width-j.mw)/W.width,i()),j.mh&&W.height>j.mh&&(e=(W.height-j.mh)/W.height,i())),j.h&&(W.style.marginTop=Math.max(j.mh-W.height,0)/2+"px"),N[1]&&(j.loop||N[z+1])&&(W.style.cursor="pointer",W.onclick=function(){K.next()}),setTimeout(function(){f(W)},1))}),setTimeout(function(){W.src=t},1)):t&&L.load(t,j.data,function(t,n){h===lt&&f("error"===n?r(ft,"Error").html(j.xhrError):e(this).contents())})}var g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},Z="colorbox",et="cbox",tt=et+"Element",nt=et+"_open",rt=et+"_load",it=et+"_complete",st=et+"_cleanup",ot=et+"_closed",ut=et+"_purge",at=e("<a/>"),ft="div",lt=0;e.colorbox||(e(d),K=e.fn[Z]=e[Z]=function(t,n){var r=this;if(t=t||{},d(),v()){if(e.isFunction(r))r=e("<a/>"),t.open=!0;else if(!r[0])return r;n&&(t.onComplete=n),r.each(function(){e.data(this,Z,e.extend({},e.data(this,Z)||Y,t))}).addClass(tt),(e.isFunction(t.open)&&t.open.call(r)||t.open)&&p(r[0])}return r},K.position=function(e,t){function n(e){E[0].style.width=T[0].style.width=w[0].style.width=parseInt(e.style.width,10)-I+"px",w[0].style.height=S[0].style.height=x[0].style.height=parseInt(e.style.height,10)-F+"px"}var r,s,u,a=0,f=0,l=y.offset();C.unbind("resize."+et),y.css({top:-9e4,left:-9e4}),s=C.scrollTop(),u=C.scrollLeft(),j.fixed?(l.top-=s,l.left-=u,y.css({position:"fixed"})):(a=s,f=u,y.css({position:"absolute"})),f+=j.right!==!1?Math.max(C.width()-j.w-R-I-o(j.right,"x"),0):j.left!==!1?o(j.left,"x"):Math.round(Math.max(C.width()-j.w-R-I,0)/2),a+=j.bottom!==!1?Math.max(i()-j.h-q-F-o(j.bottom,"y"),0):j.top!==!1?o(j.top,"y"):Math.round(Math.max(i()-j.h-q-F,0)/2),y.css({top:l.top,left:l.left,visibility:"visible"}),e=y.width()===j.w+R&&y.height()===j.h+q?0:e||0,b[0].style.width=b[0].style.height="9999px",r={width:j.w+R+I,height:j.h+q+F,top:a,left:f},0===e&&y.css(r),y.dequeue().animate(r,{duration:e,complete:function(){n(this),V=!1,b[0].style.width=j.w+R+I+"px",b[0].style.height=j.h+q+F+"px",j.reposition&&setTimeout(function(){C.bind("resize."+et,K.position)},1),t&&t()},step:function(){n(this)}})},K.resize=function(e){X&&(e=e||{},e.width&&(j.w=o(e.width,"x")-R-I),e.innerWidth&&(j.w=o(e.innerWidth,"x")),k.css({width:j.w}),e.height&&(j.h=o(e.height,"y")-q-F),e.innerHeight&&(j.h=o(e.innerHeight,"y")),e.innerHeight||e.height||(k.css({height:"auto"}),j.h=k.height()),k.css({height:j.h}),K.position("none"===j.transition?0:j.speed))},K.prep=function(t){function n(){return j.w=j.w||k.width(),j.w=j.mw&&j.mw<j.w?j.mw:j.w,j.w}function i(){return j.h=j.h||k.height(),j.h=j.mh&&j.mh<j.h?j.mh:j.h,j.h}if(X){var o,f="none"===j.transition?0:j.speed;k.empty().remove(),k=r(ft,"LoadedContent").append(t),k.hide().appendTo(L.show()).css({width:n(),overflow:j.scrolling?"auto":"hidden"}).css({height:i()}).prependTo(w),L.hide(),e(W).css({"float":"none"}),o=function(){function t(){e.support.opacity===!1&&y[0].style.removeAttribute("filter")}var n,i,o=N.length,l="frameBorder",h="allowTransparency";X&&(i=function(){clearTimeout(J),A.hide(),c(it,j.onComplete)},O.html(j.title).add(k).show(),o>1?("string"==typeof j.current&&M.html(j.current.replace("{current}",z+1).replace("{total}",o)).show(),D[j.loop||o-1>z?"show":"hide"]().html(j.next),P[j.loop||z?"show":"hide"]().html(j.previous),j.slideshow&&_.show(),j.preloading&&e.each([s(-1),s(1)],function(){var t,n,r=N[this],i=e.data(r,Z);i&&i.href?(t=i.href,e.isFunction(t)&&(t=t.call(r))):t=e(r).attr("href"),t&&u(i,t)&&(t=a(i,t),n=new Image,n.src=t)})):B.hide(),j.iframe?(n=r("iframe")[0],l in n&&(n[l]=0),h in n&&(n[h]="true"),j.scrolling||(n.scrolling="no"),e(n).attr({src:j.href,name:(new Date).getTime(),"class":et+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",i).appendTo(k),at.one(ut,function(){n.src="//about:blank"}),j.fastIframe&&e(n).trigger("load")):i(),"fade"===j.transition?y.fadeTo(f,1,t):t())},"fade"===j.transition?y.fadeTo(f,0,function(){K.position(0,o)}):K.position(f,o)}},K.next=function(){!V&&N[1]&&(j.loop||N[z+1])&&(z=s(1),p(N[z]))},K.prev=function(){!V&&N[1]&&(j.loop||z)&&(z=s(-1),p(N[z]))},K.close=function(){X&&!$&&($=!0,X=!1,c(st,j.onCleanup),C.unbind("."+et),g.fadeTo(200,0),y.stop().fadeTo(300,0,function(){y.add(g).css({opacity:1,cursor:"auto"}).hide(),c(ut),k.empty().remove(),setTimeout(function(){$=!1,c(ot,j.onClosed)},1)}))},K.remove=function(){y&&(y.stop(),e.colorbox.close(),y.stop().remove(),g.remove(),$=!1,y=null,e("."+tt).removeData(Z).removeClass(tt),e(t).unbind("click."+et))},K.element=function(){return e(U)},K.settings=Y)}(e,document,window),e});